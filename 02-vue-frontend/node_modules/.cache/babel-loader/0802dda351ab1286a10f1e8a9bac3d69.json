{"ast":null,"code":"import { createVNode as _createVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, createElementVNode as _createElementVNode, withDirectives as _withDirectives, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"form-floating mt-3 mb-3\"\n};\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"title\"\n}, \"Post Title\", -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = {\n  class: \"form-floating\"\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"description\"\n}, \"Post Description\", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  class: \"container\"\n};\nconst _hoisted_6 = {\n  class: \"row\"\n};\nconst _hoisted_7 = {\n  class: \"d-grid gap-2 mt-4\"\n};\nconst _hoisted_8 = {\n  class: \"d-grid gap-2 mt-4\"\n};\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\"Cancel\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode($setup[\"PostTitle\"], {\n    title: $setup.title\n  }, null, 8\n  /* PROPS */\n  , [\"title\"]), _createCommentVNode(\" <form @submit.prevent=\\\"editSave(post._id, event)\\\"> DATA CHECK CONTROL AFTER \"), _createElementVNode(\"div\", _hoisted_1, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control\",\n    id: \"title\",\n    placeholder: \"Post Title\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.post.title = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.post.title]]), _hoisted_2]), _createElementVNode(\"div\", _hoisted_3, [_withDirectives(_createElementVNode(\"textarea\", {\n    class: \"form-control\",\n    placeholder: \"Post Description\",\n    id: \"description\",\n    style: {\n      \"height\": \"100px\"\n    },\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.post.description = $event)\n  }, null, 512\n  /* NEED_PATCH */\n  ), [[_vModelText, $setup.post.description]]), _hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"button\", {\n    class: \"btn btn-success\",\n    type: \"button\",\n    onClick: _cache[2] || (_cache[2] = $event => $setup.editSave())\n  }, \"Save the edit\")]), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_router_link, {\n    to: \"/posts\",\n    class: \"btn btn-warning\"\n  }, {\n    default: _withCtx(() => [_hoisted_9]),\n    _: 1\n    /* STABLE */\n\n  })])])])]), _createCommentVNode(\" </form> \")]);\n}","map":{"version":3,"mappings":";;EAyDiBA,KAAK,EAAC;;;gCAEPC,oBAAqC,OAArC,EAAqC;EAA9BC,GAAG,EAAC;AAA0B,CAArC,EAAmB,YAAnB,EAA6B;AAAA;AAA7B;;;EAECF,KAAK,EAAC;;;gCAGPC,oBAAiD,OAAjD,EAAiD;EAA1CC,GAAG,EAAC;AAAsC,CAAjD,EAAyB,kBAAzB,EAAyC;AAAA;AAAzC;;;EACKF,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;EACFA,KAAK,EAAC;;;EAINA,KAAK,EAAC;;;iDAC0C;;;;;uBAlB7EG,oBAwBU,KAxBV,EAwBU,IAxBV,EAwBU,CAvBNC,aAA4BC,mBAA5B,EAA4B;IAAhBC,KAAK,EAAED;EAAS,CAA5B,EAAwB,IAAxB,EAAwB;EAAA;EAAxB,EAAwB,SAAxB,CAuBM,EAtBFE,sGAsBE,EArBEN,oBAGM,KAHN,cAGM,iBAFFA,oBAAiG,OAAjG,EAAiG;IAA1FO,IAAI,EAAC,MAAqF;IAA9ER,KAAK,EAAC,cAAwE;IAAzDS,EAAE,EAAC,OAAsD;IAA9CC,WAAW,EAAC,YAAkC;+DAAZL,YAAKC,QAAKK;EAAE,CAAjG;;EAAA,kBAAqFN,YAAKC,QAExF,EADFM,UACE,CAHN,CAqBF,EAjBEX,oBAeM,KAfN,cAeM,iBAdFA,oBAC0C,UAD1C,EAC0C;IADhCD,KAAK,EAAC,cAC0B;IADXU,WAAW,EAAC,kBACD;IADoBD,EAAE,EAAC,aACvB;IADqCI,KAAqB,EAArB;MAAA;IAAA,CACrC;+DAA7BR,YAAKS,cAAWH;EAAa,CAD1C;;EAAA,kBACaN,YAAKS,cAahB,EAZFC,UAYE,EAXFd,oBAUM,KAVN,cAUM,CATFA,oBAQM,KARN,cAQM,CAPFA,oBAGM,KAHN,cAGM,CAFFA,oBACiB,QADjB,EACiB;IADTD,KAAK,EAAC,iBACG;IADeQ,IAAI,EAAC,QACpB;IAD8BQ,OAAK,sCAAEX,iBAAF;EACnC,CADjB,EAAkE,eAAlE,CAEE,CAHN,CAOE,EAHFJ,oBAEM,KAFN,cAEM,CADFG,aAAqEa,sBAArE,EAAqE;IAAxDC,EAAE,EAAC,QAAqD;IAA5ClB,KAAK,EAAC;EAAsC,CAArE;sBAAiD,MAAM;;;;GAAvD,CACE,CAFN,CAGE,CARN,CASE,CAVN,CAWE,CAfN,CAiBF,EADFO,gCACE,CAxBV","names":["class","_createElementVNode","for","_createElementBlock","_createVNode","$setup","title","_createCommentVNode","type","id","placeholder","$event","_hoisted_2","style","description","_hoisted_4","onClick","_component_router_link","to"],"sourceRoot":"","sources":["C:\\Users\\Administrator\\Desktop\\test\\vue-mongo-crud\\02-vue-frontend\\src\\components\\posts\\PostEdit.vue"],"sourcesContent":["<script setup>\r\nimport { updateUrl, readUrl, pathMain } from '@/config/URIPath';\r\nimport PostTitle from '@/components/posts/PostTitle.vue';\r\nimport { onBeforeMount, reactive, ref } from 'vue';\r\nimport { useRoute } from 'vue-router'\r\nconst route = useRoute()\r\n\r\nconst post = reactive({\r\n    _id: '',\r\n    title: '',\r\n    description: ''\r\n});\r\nconst title = ref('This is an post edit page');\r\n\r\nonBeforeMount(async () => {\r\n    try {\r\n        await fetch(readUrl + route.params.id)\r\n            .then(response => response.json())\r\n            .then(json => post._id = json._id);\r\n        await fetch(readUrl + route.params.id)\r\n            .then(response => response.json())\r\n            .then(json => post.title = json.title);\r\n        await fetch(readUrl + route.params.id)\r\n            .then(response => response.json())\r\n            .then(json => post.description = json.description);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n});\r\n\r\n\r\n\r\nasync function editSave() {\r\n    const data = {\r\n        title: post.title,\r\n        description: post.description\r\n    };\r\n    const requestOptions = {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(data)\r\n    };\r\n    await fetch(updateUrl + route.params.id, requestOptions)\r\n        .then(response => {\r\n            response.json()\r\n            window.location.href = `${pathMain}posts`;\r\n        })\r\n        .then(json => post.value = json);\r\n}\r\n\r\n\r\n</script>\r\n\r\n<template>\r\n<div>\r\n    <PostTitle :title=\"title\" />\r\n        <!-- <form @submit.prevent=\"editSave(post._id, event)\"> DATA CHECK CONTROL AFTER -->\r\n            <div class=\"form-floating mt-3 mb-3\">\r\n                <input type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"Post Title\" v-model=\"post.title\">\r\n                <label for=\"title\">Post Title</label>\r\n            </div>\r\n            <div class=\"form-floating\">\r\n                <textarea class=\"form-control\" placeholder=\"Post Description\" id=\"description\" style=\"height: 100px\"\r\n                    v-model=\"post.description\"></textarea>\r\n                <label for=\"description\">Post Description</label>\r\n                <div class=\"container\">\r\n                    <div class=\"row\">\r\n                        <div class=\"d-grid gap-2 mt-4\">\r\n                            <button class=\"btn btn-success\" type=\"button\" @click=\"editSave()\">Save the\r\n                                edit</button>\r\n                        </div>\r\n                        <div class=\"d-grid gap-2 mt-4\">\r\n                            <router-link to=\"/posts\" class=\"btn btn-warning\">Cancel</router-link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <!-- </form> -->\r\n    </div>\r\n</template>\r\n"]},"metadata":{},"sourceType":"module"}