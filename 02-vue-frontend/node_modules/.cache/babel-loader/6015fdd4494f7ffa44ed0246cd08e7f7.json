{"ast":null,"code":"import { deleteUrl, readUrl, pathMain } from '@/config/URIPath';\nimport PostTitle from '@/components/posts/PostTitle.vue';\nimport { onBeforeMount, ref, computed } from 'vue';\nimport { useRoute } from 'vue-router';\nexport default {\n  name: 'PostDelete',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const route = useRoute();\n    const post = ref([]);\n    const title = ref('This is an post delete page');\n    const btn = ref('danger');\n    const deneme = computed(() => {\n      if (route.params.id !== post.value._id) {\n        return true;\n      }\n    });\n    onBeforeMount(async () => {\n      try {\n        await fetch(readUrl + route.params.id).then(response => response.json()).then(json => post.value = json);\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    async function deletePost() {\n      const requestOptions = {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      await fetch(deleteUrl + route.params.id, requestOptions).then(response => {\n        response.json();\n        window.location.href = `${pathMain}posts`;\n      }).catch(error => console.log(error));\n    }\n\n    const __returned__ = {\n      route,\n      post,\n      title,\n      btn,\n      deneme,\n      deletePost,\n      deleteUrl,\n      readUrl,\n      pathMain,\n      PostTitle,\n      onBeforeMount,\n      ref,\n      computed,\n      useRoute\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AACA,SAASA,SAAT,EAAoBC,OAApB,EAA6BC,QAA7B,QAA6C,kBAA7C;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,SAASC,aAAT,EAAwBC,GAAxB,EAA6BC,QAA7B,QAA6C,KAA7C;AACA,SAASC,QAAT,QAAyB,YAAzB;;;;;;;;IACA,MAAMC,KAAK,GAAGD,QAAQ,EAAtB;IAEA,MAAME,IAAI,GAAGJ,GAAG,CAAC,EAAD,CAAhB;IAEA,MAAMK,KAAK,GAAGL,GAAG,CAAC,6BAAD,CAAjB;IAEA,MAAMM,GAAG,GAAGN,GAAG,CAAC,QAAD,CAAf;IAEA,MAAMO,MAAM,GAAGN,QAAQ,CAAC,MAAM;MAC1B,IAAIE,KAAK,CAACK,MAAN,CAAaC,EAAb,KAAoBL,IAAI,CAACM,KAAL,CAAWC,GAAnC,EAAwC;QACpC,OAAO,IAAP;MACH;IACJ,CAJsB,CAAvB;IAMAZ,aAAa,CAAC,YAAY;MACtB,IAAI;QACA,MAAMa,KAAK,CAAChB,OAAO,GAAGO,KAAK,CAACK,MAAN,CAAaC,EAAxB,CAAL,CACDI,IADC,CACIC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADhB,EAEDF,IAFC,CAEIE,IAAI,IAAIX,IAAI,CAACM,KAAL,GAAaK,IAFzB,CAAN;MAGH,CAJD,CAIE,OAAOC,KAAP,EAAc;QACZC,OAAO,CAACC,GAAR,CAAYF,KAAZ;MACH;IACJ,CARY,CAAb;;IAUA,eAAeG,UAAf,GAA4B;MACxB,MAAMC,cAAc,GAAG;QACnBC,MAAM,EAAE,QADW;QAEnBC,OAAO,EAAE;UAAE,gBAAgB;QAAlB;MAFU,CAAvB;MAIA,MAAMV,KAAK,CAACjB,SAAS,GAAGQ,KAAK,CAACK,MAAN,CAAaC,EAA1B,EAA8BW,cAA9B,CAAL,CACDP,IADC,CACIC,QAAQ,IAAI;QACdA,QAAQ,CAACC,IAAT;QACAQ,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAwB,GAAE5B,QAAS,OAAnC;MACH,CAJC,EAKD6B,KALC,CAKKV,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CALd,CAAN;IAMH","names":["deleteUrl","readUrl","pathMain","PostTitle","onBeforeMount","ref","computed","useRoute","route","post","title","btn","deneme","params","id","value","_id","fetch","then","response","json","error","console","log","deletePost","requestOptions","method","headers","window","location","href","catch"],"sources":["C:/Users/Administrator/Desktop/test/vue-mongo-crud/02-vue-frontend/src/components/posts/PostDelete.vue"],"sourcesContent":["<script setup>\r\nimport { deleteUrl, readUrl, pathMain } from '@/config/URIPath';\r\nimport PostTitle from '@/components/posts/PostTitle.vue';\r\nimport { onBeforeMount, ref, computed } from 'vue';\r\nimport { useRoute } from 'vue-router'\r\nconst route = useRoute()\r\n\r\nconst post = ref([]);\r\n\r\nconst title = ref('This is an post delete page');\r\n\r\nconst btn = ref('danger');\r\n\r\nconst deneme = computed(() => {\r\n    if (route.params.id !== post.value._id) {\r\n        return true\r\n    }\r\n})\r\n\r\nonBeforeMount(async () => {\r\n    try {\r\n        await fetch(readUrl + route.params.id)\r\n            .then(response => response.json())\r\n            .then(json => post.value = json);\r\n    } catch (error) {\r\n        console.log(error);\r\n    }\r\n});\r\n\r\nasync function deletePost() {\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: { 'Content-Type': 'application/json' }\r\n    };\r\n    await fetch(deleteUrl + route.params.id, requestOptions)\r\n        .then(response => {\r\n            response.json()\r\n            window.location.href = `${pathMain}posts`;\r\n        })\r\n        .catch(error => console.log(error));\r\n}\r\n\r\n</script>\r\n<template>\r\n<div>\r\n    <PostTitle :title=\"title\" />\r\n        <div class=\"card mt-3\">\r\n            <span class=\"text-start badge bg-light text-wrap text-muted extra-small\">_id: {{ post._id }}</span>\r\n            <div class=\"card-body\">\r\n                <span v-if=\"deneme\">\r\n                    <h3>No post found!</h3>\r\n                </span>\r\n                <h5 class=\"card-title\">{{ post.title }}</h5>\r\n                <p class=\"card-text\">{{ post.description }}</p>\r\n                <div class=\"container\">\r\n                    <div class=\"row\">\r\n                        <div class=\"d-grid gap-2 mt-4\">\r\n                            <button @mouseover=\"btn = 'success'\" @mouseleave=\"btn = 'danger'\"\r\n                                :class='\"btn btn-block btn-\" + btn' @click=\"deletePost\">\r\n                                {{ btn == 'danger' ? 'Are you sure you want to delete this post?' : 'Yes. I want it deleted.' }}\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"d-grid gap-2 mt-4\">\r\n                            <router-link to=\"/posts\" class=\"btn btn-warning\">Cancel</router-link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<style>\r\n.extra-small {\r\n    font-size: 0.6rem;\r\n    font-style: italic;\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}